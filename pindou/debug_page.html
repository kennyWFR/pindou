<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PixelBead è°ƒè¯•é¡µé¢</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f5f5f5;
    }
    .debug-panel {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    .status-item {
      padding: 10px;
      margin: 5px 0;
      border-left: 4px solid #007bff;
      background: #f8f9fa;
    }
    .success { border-left-color: #28a745; }
    .error { border-left-color: #dc3545; }
    .warning { border-left-color: #ffc107; }
    button {
      background: #007bff;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      margin: 5px;
    }
    button:hover { background: #0056b3; }
    .console-output {
      background: #000;
      color: #0f0;
      font-family: monospace;
      padding: 10px;
      border-radius: 4px;
      white-space: pre-wrap;
      max-height: 300px;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <h1>ğŸ” PixelBead è°ƒè¯•é¢æ¿</h1>

  <div class="debug-panel">
    <h2>ğŸ“‹ ç³»ç»ŸçŠ¶æ€æ£€æŸ¥</h2>
    <div id="status-container">
      <div class="status-item" id="html-status">æ£€æŸ¥ HTML åŠ è½½...</div>
      <div class="status-item" id="js-status">æ£€æŸ¥ JavaScript æ‰§è¡Œ...</div>
      <div class="status-item" id="vue-status">æ£€æŸ¥ Vue åº”ç”¨åˆå§‹åŒ–...</div>
      <div class="status-item" id="router-status">æ£€æŸ¥è·¯ç”±ç³»ç»Ÿ...</div>
      <div class="status-item" id="uni-status">æ£€æŸ¥ Uni-app ç¯å¢ƒ...</div>
    </div>
  </div>

  <div class="debug-panel">
    <h2>ğŸ”§ è°ƒè¯•å·¥å…·</h2>
    <button onclick="checkEnvironment()">æ£€æŸ¥ç¯å¢ƒ</button>
    <button onclick="testVue()">æµ‹è¯• Vue</button>
    <button onclick="testUniApp()">æµ‹è¯• Uni-app</button>
    <button onclick="testRouter()">æµ‹è¯•è·¯ç”±</button>
    <button onclick="clearConsole()">æ¸…ç©ºæ§åˆ¶å°</button>
  </div>

  <div class="debug-panel">
    <h2>ğŸ’» æ§åˆ¶å°è¾“å‡º</h2>
    <div id="console-output" class="console-output">ç­‰å¾…è°ƒè¯•ä¿¡æ¯...</div>
  </div>

  <div class="debug-panel">
    <h2>ğŸ¯ å¿«é€Ÿè¯Šæ–­</h2>
    <ol>
      <li>ç‚¹å‡»"æ£€æŸ¥ç¯å¢ƒ"æŒ‰é’®</li>
      <li>æŸ¥çœ‹çŠ¶æ€æ£€æŸ¥ç»“æœ</li>
      <li>å¦‚æœæœ‰é—®é¢˜ï¼Œç‚¹å‡»ç›¸åº”æµ‹è¯•æŒ‰é’®</li>
      <li>æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºçš„è¯¦ç»†ä¿¡æ¯</li>
      <li>æ ¹æ®é”™è¯¯ä¿¡æ¯è¿›è¡Œä¿®å¤</li>
    </ol>
  </div>

  <script>
    let originalConsoleLog = console.log;
    let originalConsoleError = console.error;
    let originalConsoleWarn = console.warn;

    let consoleMessages = [];

    // é‡å†™consoleæ–¹æ³•æ¥æ•è·è¾“å‡º
    console.log = function(...args) {
      consoleMessages.push(['log', ...args]);
      updateConsole();
      originalConsoleLog.apply(console, args);
    };

    console.error = function(...args) {
      consoleMessages.push(['error', ...args]);
      updateConsole();
      originalConsoleError.apply(console, args);
    };

    console.warn = function(...args) {
      consoleMessages.push(['warn', ...args]);
      updateConsole();
      originalConsoleWarn.apply(console, args);
    };

    function updateConsole() {
      const output = document.getElementById('console-output');
      output.innerHTML = consoleMessages.map(([type, ...args]) => {
        const color = type === 'error' ? '#ff6b6b' : type === 'warn' ? '#ffd93d' : '#51cf66';
        return `<span style="color: ${color}">[${type.toUpperCase()}]</span> ${args.join(' ')}`;
      }).join('\n');
      output.scrollTop = output.scrollHeight;
    }

    function updateStatus(id, status, message, type = 'info') {
      const element = document.getElementById(id);
      element.className = `status-item ${type}`;
      element.textContent = message;
      console.log(`${id}: ${message}`);
    }

    function checkEnvironment() {
      console.log('=== ç¯å¢ƒæ£€æŸ¥å¼€å§‹ ===');

      // æ£€æŸ¥ HTML
      updateStatus('html-status', 'success', 'âœ… HTML æ–‡æ¡£åŠ è½½æ­£å¸¸');

      // æ£€æŸ¥ JavaScript
      try {
        updateStatus('js-status', 'success', 'âœ… JavaScript æ‰§è¡Œæ­£å¸¸');
      } catch (e) {
        updateStatus('js-status', 'error', 'âŒ JavaScript æ‰§è¡Œå¤±è´¥: ' + e.message, 'error');
      }

      // æ£€æŸ¥ Vue
      testVue();

      // æ£€æŸ¥ Uni-app
      testUniApp();

      // æ£€æŸ¥è·¯ç”±
      testRouter();

      console.log('=== ç¯å¢ƒæ£€æŸ¥å®Œæˆ ===');
    }

    function testVue() {
      console.log('æµ‹è¯• Vue ç¯å¢ƒ...');

      try {
        // æ£€æŸ¥ Vue æ˜¯å¦å·²åŠ è½½
        if (typeof Vue !== 'undefined') {
          updateStatus('vue-status', 'success', 'âœ… Vue å·²åŠ è½½ (ç‰ˆæœ¬: ' + Vue.version + ')');
        } else if (typeof window.Vue !== 'undefined') {
          updateStatus('vue-status', 'success', 'âœ… Vue å·²åŠ è½½ (ç‰ˆæœ¬: ' + window.Vue.version + ')');
        } else {
          updateStatus('vue-status', 'warning', 'âš ï¸ Vue æœªæ£€æµ‹åˆ°ï¼Œå¯èƒ½å°šæœªåŠ è½½', 'warning');
        }
      } catch (e) {
        updateStatus('vue-status', 'error', 'âŒ Vue æ£€æµ‹å¤±è´¥: ' + e.message, 'error');
      }
    }

    function testUniApp() {
      console.log('æµ‹è¯• Uni-app ç¯å¢ƒ...');

      try {
        if (typeof uni !== 'undefined') {
          updateStatus('uni-status', 'success', 'âœ… Uni-app API å¯ç”¨');
          console.log('Uni-app ç³»ç»Ÿä¿¡æ¯:', uni.getSystemInfoSync());
        } else if (typeof window.uni !== 'undefined') {
          updateStatus('uni-status', 'success', 'âœ… Uni-app API å¯ç”¨ (å…¨å±€)');
        } else {
          updateStatus('uni-status', 'warning', 'âš ï¸ Uni-app API æœªæ£€æµ‹åˆ°ï¼Œå¯èƒ½åœ¨é Uni-app ç¯å¢ƒä¸­', 'warning');
        }
      } catch (e) {
        updateStatus('uni-status', 'error', 'âŒ Uni-app æ£€æµ‹å¤±è´¥: ' + e.message, 'error');
      }
    }

    function testRouter() {
      console.log('æµ‹è¯•è·¯ç”±ç³»ç»Ÿ...');

      try {
        // æ£€æŸ¥æ˜¯å¦æœ‰è·¯ç”±å®ä¾‹
        if (window.$router || window.router) {
          updateStatus('router-status', 'success', 'âœ… è·¯ç”±ç³»ç»Ÿå¯ç”¨');
        } else {
          updateStatus('router-status', 'warning', 'âš ï¸ æœªæ£€æµ‹åˆ°è·¯ç”±å®ä¾‹', 'warning');
        }

        // æ£€æŸ¥å½“å‰é¡µé¢
        if (typeof uni !== 'undefined' && uni.getEnterOptionsSync) {
          try {
            const options = uni.getEnterOptionsSync();
            console.log('é¡µé¢è¿›å…¥é€‰é¡¹:', options);
          } catch (e) {
            console.log('æ— æ³•è·å–é¡µé¢é€‰é¡¹:', e.message);
          }
        }
      } catch (e) {
        updateStatus('router-status', 'error', 'âŒ è·¯ç”±æ£€æµ‹å¤±è´¥: ' + e.message, 'error');
      }
    }

    function clearConsole() {
      consoleMessages = [];
      updateConsole();
      document.getElementById('console-output').textContent = 'æ§åˆ¶å°å·²æ¸…ç©º...';
    }

    // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨å¼€å§‹æ£€æŸ¥
    window.addEventListener('load', function() {
      console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹è‡ªåŠ¨è¯Šæ–­...');
      setTimeout(checkEnvironment, 1000);
    });

    // ç›‘å¬é”™è¯¯
    window.addEventListener('error', function(e) {
      console.error('é¡µé¢é”™è¯¯:', e.error);
      updateStatus('js-status', 'error', 'âŒ é¡µé¢æ‰§è¡Œå‡ºé”™: ' + e.error.message, 'error');
    });

    console.log('è°ƒè¯•é¢æ¿å·²åŠ è½½ï¼Œç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½...');
  </script>
</body>
</html>
